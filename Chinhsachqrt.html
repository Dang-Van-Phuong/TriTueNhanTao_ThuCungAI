<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ch√≠nh s√°ch Quy·ªÅn ri√™ng t∆∞ ‚Äî PawCare</title>

  <!-- Font gi·ªëng giao di·ªán ch√≠nh -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    html, body {
      width:100%;
      height:100%;
      overflow:hidden;                  /* body kh√¥ng scroll */
      transition:background .5s ease;
    }
    * { box-sizing:border-box; margin:0; padding:0; }

    /* ==== Bi·∫øn m√†u gi·ªëng GiaoDien.html ==== */
    :root {
      --sky: url('TaiNguyen/BackGroundSang.png');
      --grass: url('TaiNguyen/NenCoSang.png');
      --nav:#CDECFF;
      --shadow1:#A5C2E9;
      --shadow2:#90B0C4;
      --user:#69B9E7;
      --brand:#4B6BAD;
      --page:#FFFFFF;
      --text:#1e293b;
      --panel:#ffffff;
      --border:#dbeafe;
      --good:#16a34a;
      --warn:#f59e0b;
      --bad:#ef4444;
      --great:#2563eb;
    }
    body.dark {
      --sky: url('TaiNguyen/BackGroundToi.png');
      --grass: url('TaiNguyen/NenCoToi.png');
      --nav:#4D50A6;
      --shadow1:#26264F;
      --shadow2:#90B0C4;
      --user:#6F77CC;
      --brand:#4B6BAD;
      --page:#0C0B3E;
      --text:#E6E9FF;
      --panel:#1A1B4D;
      --border:#3D4CA0;
    }

    body {
      font-family:'Poppins',sans-serif;
      color:var(--text);
      background:var(--page);
      display:flex;
      flex-direction:column;
      height:100vh;
      transition:all .4s ease;
    }

    /* ===== HEADER ===== */
    header{
      height:80px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:0 60px;
      background:var(--nav);
      border-bottom:1px solid var(--shadow2);
      box-shadow:0 6px 18px var(--shadow1);
      transition:all .4s ease;
      position:relative;
      z-index:5;
    }
    .logo{
      font-weight:700;
      font-size:40px;
      color:var(--brand);
      transition:color .4s ease;
    }
    body.dark .logo{ color:var(--text); }

    nav a{
      margin-left:25px;
      text-decoration:none;
      font-weight:600;
      font-size:20px;
      color:var(--text);
      padding:6px 14px;
      border-radius:999px;
      transition:all .25s ease;
    }
    nav a:hover{
      background:var(--shadow1);
      color:#fff;
    }
    nav a.active{
      background:#fff;
      color:var(--brand);
      box-shadow:0 0 0 3px var(--shadow2) inset;
    }

    /* ===== N·ªÅn ch√≠nh: m√¢y + c·ªè ===== */
    .main{
      flex:1;
      display:flex;
      align-items:center;                     /* canh gi·ªØa panel theo chi·ªÅu d·ªçc */
      justify-content:center;
      position:relative;
      width:100%;
      height:calc(100vh - 80px);             /* tr·ª´ ph·∫ßn header */
      overflow:hidden;                        /* n·ªÅn kh√¥ng scroll */
      padding:20px;
      transition:background 1s ease;

      background-image: var(--sky), var(--sky);
      background-repeat: repeat-x, repeat-x;
      background-size: 2000px auto, 2000px auto;
      background-position: 0px -150px, 2000px -150px;
      animation: skyLoop 200s linear infinite;
    }
    @keyframes skyLoop{
      from{ background-position: 0px -150px, 2000px -150px; }
      to  { background-position:-2000px -150px, 0px   -150px; }
    }
    .main::after{
      content:"";
      position:absolute;
      bottom:0;
      left:0;
      right:0;
      width:75%;
      height:95%;
      background: var(--grass) no-repeat center bottom;
      background-size: cover;
      z-index:1;
      transform:translateY(100px);
      transition:background 1s ease;
    }

    /* ===== Khung n·ªôi dung ch√≠nh s√°ch ===== */
    .policy-wrapper{
      position:relative;
      z-index:2;
      width:100%;
      max-width:900px;
      height:100%;
      margin:0 auto;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    
.policy-box{
  width:100%;
  max-height:100%;
  overflow-y:scroll;
  padding-right:8px;

  /* ·∫®N SCROLLBAR - TR√äN M·ªåI TR√åNH DUY·ªÜT */
  scrollbar-width: none;       /* Firefox */
  -ms-overflow-style: none;    /* IE/Edge c≈© */
}

.policy-box::-webkit-scrollbar{
  display:none;                /* Chrome / Edge / Safari */
}

    .policy-header{
      background:rgba(255,255,255,0.92);
      backdrop-filter:blur(12px);
      border-radius:24px;
      padding:18px 22px;
      margin-bottom:16px;
      box-shadow:0 8px 20px rgba(0,0,0,.12);
      border:1px solid var(--border);
    }
    body.dark .policy-header{
      background:rgba(26,27,77,0.95);
    }

    .policy-header h1{
      margin:0 0 6px;
      font-size:1.6rem;
    }
    .policy-header p{
      margin:0;
      font-size:0.95rem;
      opacity:0.9;
    }

    .policy-card{
      background:var(--panel);
      padding:22px 24px;
      border-radius:24px;
      box-shadow:0 8px 24px rgba(0,0,0,.14);
      border:1px solid var(--border);
      font-size:0.98rem;
      line-height:1.6;
    }
    .policy-card h2{
      margin:18px 0 8px;
      font-size:1.15rem;
      color:var(--brand);
    }
    .policy-card ol,
    .policy-card ul{
      padding-left:20px;
      margin:4px 0 10px;
    }
    .policy-card li{
      margin-bottom:4px;
    }

    .consent{
      margin-top:18px;
      padding:18px 20px;
      background:linear-gradient(180deg,#fff,#fbfdff);
      border-radius:18px;
      border:1px dashed var(--border);
      font-size:0.95rem;
    }
    body.dark .consent{
      background:linear-gradient(180deg,#1A1B4D,#151645);
    }

    .buttons{
      display:flex;
      gap:12px;
      margin-top:12px;
      flex-wrap:wrap;
    }
    button{
      padding:10px 14px;
      border-radius:12px;
      border:1px solid rgba(0,0,0,.06);
      cursor:pointer;
      background:#fff;
      font-weight:600;
    }
    #btn-request{
      background:linear-gradient(90deg,var(--user),var(--brand));
      color:#fff;
      border:none;
      box-shadow:0 6px 14px rgba(0,0,0,.18);
    }
    #btn-decline{
      background:#e5e7eb;
    }

    .status{
      margin-top:12px;
      font-size:0.9rem;
      opacity:0.9;
    }

    footer{
      margin-top:18px;
      font-size:0.85rem;
      opacity:0.9;
      text-align:center;
    }

    /* Cookie banner */
    .cookie-banner {
      position: fixed;
      bottom: 20px;
      left: 20px;
      right: 20px;
      padding: 15px;
      background: var(--panel);
      border: 1px solid var(--border);
      display: none;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.16);
      z-index: 1000;
      font-size:0.95rem;
    }
    .cookie-banner p {
      margin: 0 0 8px 0;
    }
    .cookie-banner button {
      padding: 6px 12px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight:600;
    }
    #cookie-accept {
      background: var(--user);
      color: #fff;
      margin-right:8px;
    }
    #cookie-decline {
      background: #eee;
      color:#111;
    }

    @media(max-width:900px){
      header{
        padding:0 18px;
      }
      nav a{
        font-size:16px;
        margin-left:10px;
      }
      .policy-card,
      .policy-header{
        padding:16px;
      }
      .main::after{
        width:100%;
      }
    }
  </style>
</head>

<body>
  <!-- HEADER -->
  <header>
    <div class="logo">üê∂ S√∫p AI Pet</div>
    <nav>
      <a href="GiaoDien.html" class="nav-link">Home</a>
      <a href="AboutUs.html" class="nav-link">About us</a>
      <a href="Chinhsachqrt.html" class="nav-link active">Privacy Policy</a>
      <a href="#" id="modeToggle">Dark Mode</a>
      <a href="#" id="musicToggle">üéµ Music</a>
    </nav>
  </header>

  <!-- N·ªòI DUNG CH√çNH S√ÅCH -->
  <section class="main">
    <div class="policy-wrapper">
      <!-- BOX n√†y scroll -->
      <div class="policy-box">

        <div class="policy-header">
          <h1>PawCare ‚Äî Ch√≠nh s√°ch Quy·ªÅn ri√™ng t∆∞</h1>
          <p>C·∫≠p nh·∫≠t l·∫ßn cu·ªëi: 15/11/2025</p>
          <p>Trang web PawCare ƒë∆∞·ª£c v·∫≠n h√†nh v√† ph√°t tri·ªÉn b·ªüi <strong>SenseLab</strong>.</p>
        </div>

        <section class="policy-card">
          <h2>1. D·ªØ li·ªáu ch√∫ng t√¥i thu th·∫≠p</h2>
          <ol>
            <li><strong>D·ªØ li·ªáu do ng∆∞·ªùi d√πng cung c·∫•p tr·ª±c ti·∫øp:</strong> T√™n, tr∆∞·ªùng - khu v·ª±c c·ªßa tr∆∞·ªùng, l·ªõp, n·ªôi dung ng∆∞·ªùi d√πng g·ª≠i qua h·ªá th·ªëng.</li>
            <li><strong>D·ªØ li·ªáu k·ªπ thu·∫≠t:</strong> ƒê·ªãa ch·ªâ IP, lo·∫°i thi·∫øt b·ªã, tr√¨nh duy·ªát, nh·∫≠t k√Ω h·ªá th·ªëng, t·∫ßn su·∫•t truy c·∫≠p.</li>
            <li><strong>Quy·ªÅn truy c·∫≠p Camera v√† Micro:</strong> Trang web c√≥ th·ªÉ y√™u c·∫ßu camera/micro ƒë·ªÉ ph√¢n t√≠ch c·∫£m x√∫c khi c√≥ s·ª± ƒë·ªìng √Ω c·ªßa ng∆∞·ªùi d√πng.</li>
          </ol>

          <h2>2. M·ª•c ƒë√≠ch s·ª≠ d·ª•ng d·ªØ li·ªáu</h2>
          <ul>
            <li>Qu·∫£n l√Ω th√¥ng tin ng∆∞·ªùi d√πng.</li>
            <li>Ph√¢n t√≠ch c·∫£m x√∫c v√† t·∫°o b√°o c√°o m·ªôt c√°ch ch√≠nh x√°c.</li>
            <li>Chia s·∫ª c√≥ ki·ªÉm so√°t v·ªõi ph√≤ng t∆∞ v·∫•n t√¢m l√Ω khi c√≥ s·ª± ƒë·ªìng √Ω c·ªßa ng∆∞·ªùi d√πng.</li>
          </ul>

          <h2>3. L∆∞u tr·ªØ v√† b·∫£o m·∫≠t d·ªØ li·ªáu</h2>
          <p>
            D·ªØ li·ªáu ƒë∆∞·ª£c m√£ h√≥a khi truy·ªÅn (HTTPS). D·ªØ li·ªáu nh·∫°y c·∫£m ƒë∆∞·ª£c m√£ h√≥a ·ªü m·ª©c tr∆∞·ªùng tr∆∞·ªõc khi l∆∞u v√†o c∆° s·ªü d·ªØ li·ªáu.
            H·ªá th·ªëng l∆∞u tr·ªØ tr√™n m√°y ch·ªß c√≥ ki·ªÉm so√°t truy c·∫≠p, sao l∆∞u ƒë·ªãnh k·ª≥ v√† √°p d·ª•ng t∆∞·ªùng l·ª≠a, gi√°m s√°t ƒëƒÉng nh·∫≠p ƒë·ªÉ ph√≤ng ch·ªëng truy c·∫≠p tr√°i ph√©p.
          </p>

          <h2>4. Quy·ªÅn c·ªßa ng∆∞·ªùi d√πng</h2>
          <ul>
            <li>Y√™u c·∫ßu quy·ªÅn truy c·∫≠p d·ªØ li·ªáu c√° nh√¢n.</li>
            <li>Y√™u c·∫ßu ch·ªânh s·ª≠a ho·∫∑c x√≥a d·ªØ li·ªáu.</li>
          </ul>

          <h2>5. Li√™n h·ªá</h2>
          <p>N·∫øu c√≥ th·∫Øc m·∫Øc, vui l√≤ng li√™n h·ªá: <strong>privacy@senselab.example</strong></p>

          <section class="consent">
            <h2>Quy·ªÅn truy c·∫≠p Camera &amp; Micro</h2>
            <p>ƒê·ªÉ s·ª≠ d·ª•ng t√≠nh nƒÉng ph√¢n t√≠ch c·∫£m x√∫c, PawCare c·∫ßn quy·ªÅn truy c·∫≠p <strong>Camera</strong> v√† <strong>Microphone</strong>. D·ªØ li·ªáu video/audio s·∫Ω ƒë∆∞·ª£c x·ª≠ l√Ω t·∫°m th·ªùi ƒë·ªÉ ph√¢n t√≠ch v√† ch·ªâ l∆∞u l·∫°i khi b·∫°n ƒë·ªìng √Ω.</p>

            <div class="buttons">
              <button id="btn-request">Y√™u c·∫ßu quy·ªÅn Camera/Micro</button>
              <button id="btn-decline">T·ª´ ch·ªëi</button>
            </div>

            <div id="status" class="status"></div>
          </section>

          <footer>
            <small>SenseLab ‚Äî PawCare</small>
          </footer>
        </section>
      </div>
    </div>

    <!-- Cookie banner -->
    <div id="cookie-banner" class="cookie-banner">
      <p>Trang web s·ª≠ d·ª•ng cookies ƒë·ªÉ l∆∞u th√¥ng tin v√† c·∫£i thi·ªán tr·∫£i nghi·ªám. B·∫±ng c√°ch ti·∫øp t·ª•c, b·∫°n ƒë·ªìng √Ω v·ªõi ch√≠nh s√°ch cookies.</p>
      <button id="cookie-accept">ƒê·ªìng √Ω</button>
      <button id="cookie-decline">T·ª´ ch·ªëi</button>
    </div>
  </section>

  <!-- Nh·∫°c n·ªÅn -->
  <audio id="bgMusic" loop>
    <source src="peace.mp3" type="audio/mpeg">
  </audio>

  <script>
    // ========== Mode s√°ng / t·ªëi ==========
    const modeBtn = document.getElementById("modeToggle");
    modeBtn.addEventListener("click", (e) => {
      e.preventDefault();
      document.body.classList.toggle("dark");
      modeBtn.textContent = document.body.classList.contains("dark") ? "Light Mode" : "Dark Mode";
    });

    // ========== Nh·∫°c n·ªÅn ==========
    const musicBtn = document.getElementById("musicToggle");
    const music = document.getElementById("bgMusic");
    let musicPlaying = false;

    musicBtn.addEventListener("click", (e) => {
      e.preventDefault();
      if (!musicPlaying) {
        music.play()
          .then(() => {
            musicPlaying = true;
            musicBtn.textContent = "üîá Stop";
          })
          .catch(err => {
            console.error("Kh√¥ng th·ªÉ ph√°t nh·∫°c:", err);
            alert("Tr√¨nh duy·ªát ch·∫∑n t·ª± ƒë·ªông ph√°t nh·∫°c, b·∫°n th·ª≠ click l·∫°i nha üéµ");
          });
      } else {
        music.pause();
        musicPlaying = false;
        musicBtn.textContent = "üéµ Music";
      }
    });

    // ========== Quy·ªÅn Camera / Micro ==========
    const btnRequest = document.getElementById('btn-request');
    const btnDecline = document.getElementById('btn-decline');
    const statusEl = document.getElementById('status');

    btnRequest.addEventListener('click', async () => {
      statusEl.textContent = 'ƒêang y√™u c·∫ßu quy·ªÅn... Tr√¨nh duy·ªát s·∫Ω h·ªèi b·∫°n cho ph√©p.';
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
        statusEl.textContent = 'ƒê√£ c·∫•p quy·ªÅn Camera & Micro. ƒêang g·ª≠i consent t·ªõi server...';

        try {
          const resp = await fetch('/api/consent', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              consent: true,
              timestamp: new Date().toISOString(),
              userAgent: navigator.userAgent
            })
          });
          if (!resp.ok) throw new Error('L·ªói server khi g·ª≠i consent');
        } catch (err) {
          console.warn('Kh√¥ng g·ª≠i ƒë∆∞·ª£c consent l√™n server:', err);
        }

        statusEl.textContent = 'B·∫°n ƒë√£ ƒë·ªìng √Ω. PawCare s·∫Ω ch·ªâ l∆∞u d·ªØ li·ªáu khi b·∫°n ƒë·ªìng √Ω r√µ r√†ng.';

        const video = document.createElement('video');
        video.autoplay = true;
        video.muted = true;
        video.playsInline = true;
        video.srcObject = stream;
        video.style.width = '320px';
        video.style.marginTop = '12px';
        statusEl.appendChild(document.createElement('br'));
        statusEl.appendChild(video);

      } catch (err) {
        console.error(err);
        statusEl.textContent = 'Quy·ªÅn b·ªã t·ª´ ch·ªëi ho·∫∑c c√≥ l·ªói: ' + err.message;
      }
    });

    btnDecline.addEventListener('click', async () => {
      statusEl.textContent = 'B·∫°n ƒë√£ t·ª´ ch·ªëi c·∫•p quy·ªÅn. M·ªôt s·ªë ch·ª©c nƒÉng s·∫Ω b·ªã h·∫°n ch·∫ø.';
      try {
        await fetch('/api/consent', {
          method: 'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({
            consent: false,
            timestamp: new Date().toISOString(),
            userAgent: navigator.userAgent
          })
        });
      } catch(e) {
        console.warn('Kh√¥ng g·ª≠i ƒë∆∞·ª£c consent decline:', e);
      }
    });

    // ========== Cookie banner ==========
    const banner = document.getElementById('cookie-banner');
    const acceptBtn = document.getElementById('cookie-accept');
    const declineBtn = document.getElementById('cookie-decline');

    function setCookie(name, value, days){
      const d = new Date();
      d.setTime(d.getTime() + days*24*60*60*1000);
      document.cookie = name + "=" + value + ";path=/;expires=" + d.toUTCString();
    }

    function getCookie(name){
      const cname = name + "=";
      const ca = document.cookie.split(";");
      for(let cookie of ca){
        cookie = cookie.trim();
        if(cookie.indexOf(cname) === 0) return cookie.substring(cname.length);
      }
      return "";
    }

    if(!getCookie("pawcare_cookie_consent")){
      banner.style.display = "block";
    }

    acceptBtn.addEventListener("click", async () => {
      setCookie("pawcare_cookie_consent","accepted",365);
      banner.style.display = "none";
      try{
        await fetch("/api/cookie-consent",{
          method:"POST",
          headers:{"Content-Type":"application/json"},
          body: JSON.stringify({consent:true})
        });
      }catch(e){
        console.warn("Kh√¥ng g·ª≠i ƒë∆∞·ª£c cookie-consent:", e);
      }
    });

    declineBtn.addEventListener("click", async () => {
      setCookie("pawcare_cookie_consent","declined",365);
      banner.style.display = "none";
      try{
        await fetch("/api/cookie-consent",{
          method:"POST",
          headers:{"Content-Type":"application/json"},
          body: JSON.stringify({consent:false})
        });
      }catch(e){
        console.warn("Kh√¥ng g·ª≠i ƒë∆∞·ª£c cookie-consent:", e);
      }
    });
  </script>
</body>
</html>